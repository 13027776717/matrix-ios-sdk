MXDevice: Move to dedicated file and implement MSC-3852.
